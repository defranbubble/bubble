<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bubble English Game</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f172a;
  color:white;
  text-align:center;
}
button{
  padding:12px 20px;
  font-size:16px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
.hidden{display:none}

#menu, #settings, #pauseMenu{
  padding-top:60px;
}

.choice{
  width:80%;
  margin:10px auto;
  background:#2563eb;
  color:white;
}
.choice:active{
  transform:scale(0.95);
}

#topBar{
  display:flex;
  justify-content:space-between;
  padding:10px;
}

#timerBar{
  height:8px;
  background:#22c55e;
  transition:width 0.1s linear;
}

.card{
  background:#1e293b;
  margin:15px;
  padding:15px;
  border-radius:10px;
}
</style>
</head>

<body>

<!-- MENU -->
<div id="menu">
  <h1>Bubble English Game</h1>
  <p>Skor Tertinggi: <span id="highScore">0</span></p>
  <button onclick="startGame()">‚ñ∂ Play</button><br><br>
  <button onclick="openSettings()">‚öô Settings</button>
</div>

<!-- SETTINGS -->
<div id="settings" class="hidden">
  <h2>Settings</h2>
  <p>Game belajar bahasa Inggris berbentuk game cepat & menantang.</p>
  <button onclick="backMenu()">‚¨Ö Kembali</button>
</div>

<!-- GAME -->
<div id="game" class="hidden">
  <div id="topBar">
    <div>Level: <span id="level">1</span> | Skor: <span id="score">0</span></div>
    <button onclick="pauseGame()">‚è∏</button>
  </div>

  <div id="timerBar"></div>

  <h2 id="question"></h2>

  <button class="choice" onclick="choose(0)"></button>
  <button class="choice" onclick="choose(1)"></button>

  <p id="feedback"></p>
</div>

<!-- PAUSE -->
<div id="pauseMenu" class="hidden">
  <h2>‚è∏ Pause</h2>

  <div class="card">
    <h3>Tentang Game</h3>
    <p>Bubble English Game</p>
    <p>Versi 2.0</p>
    <p>Pembuat: <b>Defran Bubble</b></p>
    <p>Dibuat: 26 Desember 2025</p>
  </div>

  <div class="card">
    <h3>Privacy Policy</h3>
    <p>Game ini tidak mengumpulkan data pribadi apa pun.</p>
    <p>Semua permainan berjalan offline di browser.</p>
  </div>

  <button onclick="resumeGame()">‚ñ∂ Lanjut</button><br><br>
  <button onclick="backMenu()">üè† Menu</button>
</div>

<script>
// ===== DATA =====
const words = [
  ["dog","anjing"],["cat","kucing"],["cow","sapi"],["bird","burung"],
  ["fish","ikan"],["horse","kuda"],["lion","singa"],["tiger","harimau"],
  ["apple","apel"],["banana","pisang"],["water","air"],["milk","susu"],
  ["city","kota"],["school","sekolah"],["house","rumah"],["car","mobil"],
  ["book","buku"],["teacher","guru"],["student","murid"]
];

let level=1, score=0, time=10000, timer;
let correctIndex=0;
let currentPair=[];

let highScore = localStorage.getItem("highScore") || 0;
document.getElementById("highScore").innerText = highScore;

// ===== MENU =====
function startGame(){
  level=1; score=0; time=10000;
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
  nextQuestion();
}

function openSettings(){
  menu.classList.add("hidden");
  settings.classList.remove("hidden");
}

function backMenu(){
  clearInterval(timer);
  game.classList.add("hidden");
  pauseMenu.classList.add("hidden");
  settings.classList.add("hidden");
  menu.classList.remove("hidden");
  document.getElementById("highScore").innerText = highScore;
}

// ===== GAME =====
function nextQuestion(){
  document.getElementById("feedback").innerText="";
  document.getElementById("level").innerText=level;
  document.getElementById("score").innerText=score;

  currentPair = words[Math.floor(Math.random()*words.length)];
  correctIndex = Math.random()<0.5 ? 0 : 1;

  let wrongPair;
  do{
    wrongPair = words[Math.floor(Math.random()*words.length)];
  }while(wrongPair===currentPair);

  document.getElementById("question").innerText =
    "Apa arti dari: " + currentPair[0];

  const buttons=document.getElementsByClassName("choice");
  buttons[correctIndex].innerText=currentPair[1];
  buttons[1-correctIndex].innerText=wrongPair[1];

  startTimer();
}

function choose(i){
  clearInterval(timer);

  if(i===correctIndex){
    document.getElementById("feedback").innerText="Anda benar ‚úî";
    score+=10;
    level++;
    time=Math.max(2000,time-100);
  }else{
    document.getElementById("feedback").innerText="Anda salah ‚úñ";
  }

  if(score>highScore){
    highScore=score;
    localStorage.setItem("highScore",highScore);
  }

  setTimeout(nextQuestion,600);
}

// ===== TIMER =====
function startTimer(){
  let bar=document.getElementById("timerBar");
  let remaining=time;
  bar.style.width="100%";

  timer=setInterval(()=>{
    remaining-=100;
    bar.style.width=(remaining/time*100)+"%";
    if(remaining<=0){
      clearInterval(timer);
      document.getElementById("feedback").innerText="Waktu habis ‚è∞";
      setTimeout(nextQuestion,600);
    }
  },100);
}

// ===== PAUSE =====
function pauseGame(){
  clearInterval(timer);
  game.classList.add("hidden");
  pauseMenu.classList.remove("hidden");
}

function resumeGame(){
  pauseMenu.classList.add("hidden");
  game.classList.remove("hidden");
  startTimer();
}
</script>

</body>
</html>
